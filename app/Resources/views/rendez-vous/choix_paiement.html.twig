{% extends '::base.html.twig' %}

{% set remote_rdv = cart.service.remoteMode == true and cart.remoteMode == true %}

{% block cart %}
    {{ render(controller('AppBundle:RendezVous:cart')) }}
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/custom_css.css') }}">
    <link rel="stylesheet" href="{{ asset('css/components/bs-switches.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('css/components/radio-checkbox.css') }}" type="text/css" />
    <style>
        .payment-disabled .fbox-icon > i,
        .payment-disabled h3,
        .payment-disabled p.notopmargin > span {
            color: #c5c5c5 !important;
        }

        .payment-disabled div.center-block {
            display: none;
        }

        .col_one_third {
            padding: 5px;
            border-radius: 5px;
        }
    </style>
{% endblock %}

{% block title %}Prendre un rendez-vous (3/4){% endblock %}

{% block page_title %}
    {% include 'index/page_title.html.twig' with {
    page_title: 'Prendre un rendez-vous',
    page_subtitle: 'Bien. Passons au mode de règlement.',
    steps: [{
    name: 'Prendre un rendez-vous'
    }, {
    name: 'Choisissez un moyen de paiement'
    }]
    } %}
{% endblock %}

{% block content %}
    <div class="container clearfix">
        {% include 'rendez-vous/etapes.inc.html.twig' with {step: 3} %}
        <form class="cart nobottommargin clearfix center-block" method="post" action="{{ path('rendez_vous_confirmation') }}">
            <div class="section nobottommargin">
                <div class="container clearfix">

                    <div class="col_one_third nobottommargin {% if remote_rdv == true %}payment-disabled{% endif %}">
                        <div class="feature-box fbox-plain fbox-dark fbox-small" >

                            <div class="fbox-icon">
                                <i class="icon-money"></i>
                            </div>
                            <h3>Chèque ou espèces</h3>
                            <p class="notopmargin" >
                                <span>Je paye par chèque ou en espèces à la fin du rendez-vous en face à face.</span>
                            </p>
                            <div class="center-block" style="width: 50px; zoom: 1.5">
                                <input id="liquide"  class="radio-style" name="choix_paiement" type="radio" value="{{ constant('AppBundle\\Entity\\Cart::MODE_CASH') }}">
                                <label for="liquide" class="radio-style-2-label"></label>
                            </div>
                        </div>
                    </div>

                    <div class="col_one_third nobottommargin">
                        <div class="feature-box fbox-plain fbox-dark fbox-small">
                            <div class="fbox-icon">
                                <i class="icon-credit-cards"></i>
                            </div>
                            <h3>Carte de crédit</h3>
                            <p class="nobottommargin">Je règle le montant en ligne par carte avant le rendez-vous.</p>
                        </div>

                        <div class="center-block" style="width: 50px; zoom: 1.5">
                            <input id="carte" class="radio-style" name="choix_paiement" type="radio" value="{{ constant('AppBundle\\Entity\\Cart::MODE_BANK_CARD') }}">
                            <label for="carte" class="radio-style-2-label"></label>
                        </div>
                    </div>

                    <div class="col_one_third nobottommargin col_last">
                        <div class="feature-box fbox-plain fbox-dark fbox-small">
                            <div class="fbox-icon">
                                <i class="icon-paypal"></i>
                            </div>
                            <h3>Paypal</h3>
                            <p class="nobottommargin">Je règle le montant en ligne par Paypal avant le rendez-vous.</p>
                        </div>

                        <div class="center-block" style="width: 50px; zoom: 1.5">
                            <input id="paypal" class="radio-style" name="choix_paiement" type="radio" value="{{ constant('AppBundle\\Entity\\Cart::MODE_PAYPAL') }}">
                            <label for="paypal" class="radio-style-2-label"></label>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sx-12 section nobottommargin notopmargin notoppadding nobottompadding">
                    <div class="text-center col-md-12"><button type="submit" class="center-block add-to-cart button nomargin" readonly="readonly">Choisir</button></div>
                </div>
            </div>
        </form>
    </div>

{% endblock %}

{% block javascripts %}
    <script>
        jQuery(function($) {
            $('.col_one_third').css('cursor', 'pointer').on('click', function() {
                $(this).find('input').prop('checked', true);
            }).hover(function() {
                $(this).css('backgroundColor', '#eaeaea');
            }, function() {
                $(this).css('backgroundColor', '#F9F9F9');

            });

            $('[rel=tooltip]').tooltip();

            $('.col_one_third').on('click', function() {
                 $('button[type=submit]').prop('disabled', false);
            });
        });
    </script>
{% endblock %}